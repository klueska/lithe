# Generic Makevars file for all bthread based libraries

# These variables and function definitions are needed both within this
# Makerules file as well as any others that are related to the compilation of
# this library (i.e. tests/Makerules).  
uc = $(shell echo $(1) | tr a-z A-Z)
SCHEDUCNAME  := $(call uc, $(SCHEDNAME))
SCHEDSRCDIR := $(SCHEDDIR)/$(SCHEDNAME)
SCHEDINCDIR := $(BUILDINCDIR)/$(SCHEDNAME)
SCHEDOBJDIR := $(BUILDOBJDIR)/$(SCHEDNAME)
SCHEDLIBDIR := $(BUILDLIBDIR)
FINALSCHED  := $(SCHEDLIBDIR)/lib$(SCHEDNAME).a

# These variables are specific just to the compilation of the library itself.
SCHED_CFLAGS   += -g -O2 -Wall -std=gnu99 -MMD -MP
SCHED_CFLAGS   += -fno-strict-aliasing
SCHED_CFLAGS   += -Wno-unused-function
SCHED_CXXFLAGS += $(filter-out -std=gnu99, $(SCHED_CFLAGS))
SCHED_INCS     := $(patsubst %, -I%, $(LIBINCDIR) $(SCHEDDIR) $(SCHEDSRCDIR))
SCHED_CFILES   := $(notdir $(wildcard $(SCHEDDIR)/*.c))
SCHED_CFILES   += $(notdir $(wildcard $(SCHEDSRCDIR)/*.c))
SCHED_OBJS     := $(patsubst %.c, $(SCHEDOBJDIR)/%.o, $(SCHED_CFILES))
SCHED_DEPS     := $(patsubst %.o, %.d, $(SCHED_OBJS))

